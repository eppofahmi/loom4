<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Meta tags for character encoding and responsive design -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loom4</title>
  
  <!-- External CSS libraries -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Main application container - houses sidebar and main content -->
  <div class="app-container">
    
    <!-- LEFT SIDEBAR - Navigation and chat history -->
    <div class="sidebar" id="sidebar">
      
      <!-- Sidebar header with logo and toggle button -->
      <div class="sidebar-header">
        <div class="header-content">
          <!-- Toggle button to collapse/expand sidebar -->
          <div class="sidebar-toggle" id="sidebarToggle">
            <i class="fa-brands fa-flipboard"></i>
          </div>
          <!-- Application logo -->
          <div class="app-logo">
            <h1>Loom4</h1>
          </div>
        </div>
      </div>

      <!-- Navigation menu -->
      <nav class="sidebar-nav">
        <!-- Main navigation items -->
        <div class="nav-item active" data-section="projects">
          <i class="fas fa-folder"></i>
          <span>Projects</span>
        </div>

        <div class="nav-item" data-section="connect">
          <i class="fas fa-plug"></i>
          <span>Connect</span>
        </div>

        <div class="nav-item" data-section="artifacts">
          <i class="fas fa-cube"></i>
          <span>Artifacts</span>
        </div>

        <div class="nav-item" data-section="chat">
          <i class="fas fa-comments"></i>
          <span>Chat</span>
        </div>

        <!-- Recent chat history section -->
        <div class="nav-section" id="recentChatSection">
          <div class="nav-section-header">
            <span>Recent Chat</span>
          </div>
          <!-- Dynamic chat list populated by JavaScript -->
          <div class="chat-list" id="chatList">
            <!-- Chat history will be populated here -->
          </div>
        </div>

        <!-- User profile section at bottom of sidebar -->
        <div class="profile-section">
          <!-- Profile toggle button -->
          <div class="nav-item profile-item" id="profileToggle">
            <i class="fas fa-user-circle"></i>
            <span>My Profile</span>
          </div>
        </div>
      </nav>
    </div>

    <!-- MAIN CONTENT AREA - Different sections shown based on navigation -->
    <div class="main-content">
      
      <!-- PROJECTS SECTION - Manage AI projects -->
      <div class="content-section active" id="projects-section">
        <div class="section-container">
          <div class="section-header">
            <h2>Projects</h2>
            <!-- Button to create new project -->
            <button class="add-btn" id="addProjectBtn">
              <i class="fas fa-plus"></i>
              Add Project
            </button>
          </div>
          <!-- Grid layout for project cards -->
          <div class="projects-grid" id="projectsGrid">
            <!-- Projects will be populated here by JavaScript -->
          </div>
        </div>
      </div>

      <!-- CONNECT SECTION - Knowledge base connections -->
      <div class="content-section" id="connect-section">
        <div class="connect-container">
          <!-- Section header -->
          <div class="connect-header">
            <h1>Knowledge Base</h1>
            <p>Connect your data sources to enhance AI conversations</p>
          </div>

          <!-- Grid of connection options -->
          <div class="connect-grid">
            
            <!-- File upload connection card -->
            <div class="connect-card" data-connection-type="file">
              <div class="connect-card-header">
                <div class="connect-icon file-icon">
                  <i class="fas fa-file-upload"></i>
                </div>
                <h3>Files</h3>
              </div>
              <p>Upload documents, PDFs, and other files</p>
              <button class="connect-btn">Connect Files</button>
            </div>

            <!-- Web content connection card -->
            <div class="connect-card" data-connection-type="web">
              <div class="connect-card-header">
                <div class="connect-icon url-icon">
                  <i class="fas fa-globe"></i>
                </div>
                <h3>Web Content</h3>
              </div>
              <p>Connect to websites and online resources</p>
              <button class="connect-btn">Connect Website</button>
            </div>

            <!-- Database connection card -->
            <div class="connect-card" data-connection-type="database">
              <div class="connect-card-header">
                <div class="connect-icon database-icon">
                  <i class="fas fa-database"></i>
                </div>
                <h3>Database</h3>
              </div>
              <p>Connect to your SQL or NoSQL databases</p>
              <button class="connect-btn">Connect Database</button>
            </div>

            <!-- API connection card -->
            <div class="connect-card" data-connection-type="api">
              <div class="connect-card-header">
                <div class="connect-icon api-icon">
                  <i class="fa-solid fa-plug"></i>
                  <div class="api-pulse"></div>
                </div>
                <h3>API</h3>
              </div>
              <p>Connect to REST or GraphQL APIs</p>
              <!-- API type badges -->
              <div class="api-badges">
                <span class="api-badge rest">REST</span>
                <span class="api-badge graphql">GraphQL</span>
                <span class="api-badge websocket">WS</span>
              </div>
              <button class="connect-btn">Configure API</button>
            </div>
          </div>

          <!-- Overview of connected knowledge sources -->
          <div class="knowledge-overview">
            <div class="overview-header">
              <h2>Connected Knowledge Sources</h2>
              <!-- Statistics display -->
              <div class="overview-stats">
                <div class="stat-item">
                  <span class="stat-number" id="totalFiles">0</span>
                  <span class="stat-label">Files</span>
                </div>
                <div class="stat-item">
                  <span class="stat-number" id="totalUrls">0</span>
                  <span class="stat-label">URLs</span>
                </div>
                <div class="stat-item">
                  <span class="stat-number" id="totalConnections">0</span>
                  <span class="stat-label">DB</span>
                </div>
                <div class="stat-item">
                  <span class="stat-number" id="totalConnections">0</span>
                  <span class="stat-label">API</span>
                </div>
              </div>
            </div>
            <!-- List of connected knowledge sources -->
            <div class="knowledge-list" id="knowledgeList">
              <!-- Knowledge sources will be listed here -->
            </div>
          </div>
        </div>
      </div>

      <!-- ARTIFACTS SECTION - View generated artifacts -->
      <div class="content-section" id="artifacts-section">
        <div class="artifacts-container">
          <h2>Your Artifacts</h2>
          <!-- Grid of artifact cards -->
          <div class="artifacts-grid" id="artifactsGrid">
            <!-- Artifacts will be populated here by JavaScript -->
          </div>
        </div>
      </div>

      <!-- CHAT SECTION - Chat history overview -->
      <div class="content-section" id="chat-section">
        <div class="chat-history-container">
          <div class="chat-history-header">
            <h1>Your chat history</h1>
            <!-- Button to start new chat -->
            <button class="new-chat-btn" id="addChatBtn">
              <i class="fas fa-plus"></i>
              New chat
            </button>
          </div>
          <!-- Search functionality for chats -->
          <div class="chat-search-container">
            <div class="chat-search">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search your chats..." id="chatSearchInput">
            </div>
          </div>
          <!-- List of chat history items -->
          <div class="chat-history-list" id="chatHistoryList">
            <!-- Chat history will be populated here by JavaScript -->
          </div>
        </div>
      </div>

      <!-- ACTIVE CHAT VIEW - Main chat interface -->
      <div class="content-section" id="active-chat-section">
        <!-- Chat header with model selector and artifact button -->
        <div class="chat-header">
          <div class="model-selector">
            <select id="modelSelect">
              <option value="claude-3-sonnet">Claude 3 Sonnet</option>
              <option value="claude-3-haiku">Claude 3 Haiku</option>
              <option value="claude-3-opus">Claude 3 Opus</option>
            </select>
          </div>
          <!-- Button to open last artifact -->
          <button class="last-artifact-btn" id="lastArtifactBtn" title="Open last artifact">
            <i class="fas fa-cube"></i>
          </button>
        </div>

        <!-- Chat messages area -->
        <div class="chat-messages" id="chatMessages">
          <!-- Welcome message shown initially -->
          <div class="welcome-message">
            <div class="welcome-content">
              <h1>Hello, I'm Loom4</h1>
              <p>I'm an AI assistant that can help you with analysis, writing, coding, math, and many other tasks.</p>
            </div>
          </div>
        </div>

        <!-- Chat input area -->
        <div class="chat-input-container">
          <div class="chat-input">
            <textarea id="messageInput" placeholder="How can I help you today?"></textarea>
            <button id="sendButton" class="send-btn" disabled>
              <i class="fas fa-arrow-up"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ARTIFACT VIEWER - Side panel for viewing artifacts -->
    <div class="artifact-viewer" id="artifactViewer">
      <!-- Artifact header with title and close button -->
      <div class="artifact-header">
        <div class="artifact-info">
          <h3 id="artifactTitle">Artifact Viewer</h3>
          <span class="artifact-type" id="artifactType"></span>
        </div>
        <button class="close-artifact" id="closeArtifact">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <!-- Artifact content display area -->
      <div class="artifact-content" id="artifactContent">
        <div class="no-artifact">
          <i class="fas fa-cube"></i>
          <p>No artifact selected</p>
        </div>
      </div>
    </div>
  </div>

  <!-- PROFILE OVERLAY MENU -->
  <div class="profile-overlay" id="profileOverlay">
    <div class="profile-overlay-content">
      <!-- Profile Header -->
      <div class="profile-overlay-header">
        <h3>Loom4 AI Assistant</h3>
        <p id="profileUserEmail">john.doe@example.com</p>
      </div>

      <!-- Profile Info Section -->
      <div class="profile-info-section">
        <div class="profile-avatar-section">
          <div class="profile-avatar-circle">
            <span id="profileInitials">JD</span>
          </div>
          <div class="profile-details">
            <h4>Personal</h4>
            <p>Free plan</p>
          </div>
          <div class="profile-checkmark">
            <i class="fas fa-check"></i>
          </div>
        </div>
      </div>

      <!-- Profile Menu Items -->
      <div class="profile-menu">
        <div class="profile-menu-item" data-action="settings">
          <span>Settings</span>
        </div>

        <div class="profile-menu-item" data-action="language">
          <span>Language</span>
          <i class="fas fa-chevron-right"></i>
        </div>

        <div class="profile-menu-item" data-action="contact">
          <span>Get help</span>
        </div>

        <div class="profile-menu-divider"></div>

        <div class="profile-menu-item" data-action="upgrade">
          <span>Upgrade plan</span>
        </div>

        <div class="profile-menu-item" data-action="learn">
          <span>Learn more</span>
          <i class="fas fa-chevron-right"></i>
        </div>

        <div class="profile-menu-divider"></div>

        <div class="profile-menu-item logout" data-action="logout">
          <span>Log out</span>
        </div>
      </div>

      <!-- Bottom Profile Section -->
      <div class="profile-bottom-section">
        <div class="profile-avatar-section">
          <div class="profile-avatar-circle">
            <span>JD</span>
          </div>
          <div class="profile-details">
            <h4 id="profileUserName">John Doe</h4>
            <p>Free plan</p>
          </div>
          <div class="profile-dropdown-arrow">
            <i class="fas fa-chevron-down"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- LOADING INDICATOR - Shows when AI is typing -->
  <div class="typing-indicator" id="typingIndicator">
    <div class="typing-dots">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>

  <!-- MODAL DIALOGS -->
  
  <!-- Project creation modal -->
  <div class="project-modal" id="projectModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Create New Project</h3>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Project creation form fields -->
        <div class="form-group">
          <label>Project Name</label>
          <input type="text" id="projectName" placeholder="e.g. Marketing Campaign">
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea id="projectDescription" placeholder="Brief project description"></textarea>
        </div>
        <div class="form-group">
          <label>Instructions</label>
          <textarea id="projectInstructions" placeholder="Specific guidelines for this project"></textarea>
        </div>
        <!-- Knowledge base selection -->
        <div class="form-group">
          <label>Knowledge Base</label>
          <div class="knowledge-options">
            <div class="option-card" data-kb-type="new">
              <i class="fas fa-plus"></i>
              <span>Create New</span>
            </div>
            <div class="option-card" data-kb-type="existing">
              <i class="fas fa-link"></i>
              <span>Use Existing</span>
            </div>
          </div>
          <select id="existingKnowledge" class="hidden">
            <option value="">Select knowledge base</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary close-modal">Cancel</button>
        <button class="btn btn-primary" id="saveProject">Save Project</button>
      </div>
    </div>
  </div>

  <!-- Connection setup modal -->
  <div class="connection-modal" id="connectionModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">New Connection</h3>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Dynamic form will be inserted here by JavaScript -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary close-modal">Cancel</button>
        <button class="btn btn-primary" id="confirmConnection">Connect</button>
      </div>
    </div>
  </div>

  <!-- Settings modal -->
  <div class="settings-modal" id="settingsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Settings</h3>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Settings tabs -->
        <div class="settings-tabs">
          <div class="tab active" data-tab="general">General</div>
          <div class="tab" data-tab="profile">Profile</div>
          <div class="tab" data-tab="about">About</div>
        </div>

        <!-- General settings tab content -->
        <div class="tab-content active" data-tab="general">
          <div class="form-group">
            <label>Language</label>
            <select id="languageSelect">
              <option value="en">English</option>
              <option value="es">Español</option>
              <option value="fr">Français</option>
            </select>
          </div>
          <!-- Theme selection -->
          <div class="form-group">
            <label>Theme</label>
            <div class="theme-options">
              <div class="theme-option" data-theme="light">
                <div class="theme-preview light"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="dark">
                <div class="theme-preview dark"></div>
                <span>Dark</span>
              </div>
              <div class="theme-option" data-theme="system">
                <div class="theme-preview system"></div>
                <span>System</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Profile tab content -->
        <div class="tab-content" data-tab="profile">
          <div class="profile-view">
            <div class="avatar"></div>
            <div class="profile-info">
              <h4 id="userName">User Name</h4>
              <p id="userEmail">user@example.com</p>
            </div>
          </div>
        </div>

        <!-- About tab content -->
        <div class="tab-content" data-tab="about">
          <div class="about-content">
            <h4>About Loom4</h4>
            <p>Version 1.0.0</p>
            <div class="about-links">
              <a href="#" id="termsLink">Terms of Use</a>
              <a href="#" id="privacyLink">Privacy Policy</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat rename modal -->
  <div class="chat-rename-modal" id="chatRenameModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Rename Chat</h3>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Chat Name</label>
          <input type="text" id="chatRenameInput" placeholder="Enter new chat name">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary close-modal">Cancel</button>
        <button class="btn btn-primary" id="confirmChatRename">Rename</button>
      </div>
    </div>
  </div>

  <!-- Chat share modal -->
  <div class="chat-share-modal" id="chatShareModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Share Chat</h3>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Share link generation -->
        <div class="form-group">
          <label>Share Link</label>
          <div class="share-link-container">
            <input type="text" id="chatShareLink" readonly>
            <button class="btn btn-primary" id="copyChatLink">
              <i class="fas fa-copy"></i> Copy
            </button>
          </div>
        </div>
        <!-- Public sharing option -->
        <div class="form-group">
          <label>
            <input type="checkbox" id="sharePublic" checked>
            Make this chat publicly accessible
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary close-modal">Close</button>
      </div>
    </div>
  </div>

  <!-- JavaScript file -->
  <script src="script.js"></script>
</body>

</html>